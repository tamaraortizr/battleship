import random, copy, sys, pygame
from pygame.locals import*

ancho =7
altura =6
dificultad = 2
fichat = 80

fps = 40
windowwidth = 800
windowheight = 800
xmargin = int((windowwidth-ancho*fichat)/2)
ymargin = int((windowwidth-altura*fichat)/2)

blue = (100, 149, 237)
white = (255, 255, 255)

usuario= "usuario"
computadora= "computadora"
none= None
morado= "morado"
verde= "verde"

def main():
    global clock, window, morados, verdes, fichamoradaimg, fichaverdeimg, tableroimg, ganasteimg, ganasterect, perdisteimg, empateimg, instruccionesimg, instruccionesrect, juego
    pygame.init()
    clock=pygame.time.Clock()
    window=pygame.display.set_mode(windowwidth, windowheight)
    pygame.display.set_caption("Connect 4!")
    morados=pygame.Rect(int(fichat / 2), windowheight - int(3 * fichat / 2), fichat, fichat)
    verdes=pygame.Rect(windowwidth - int(3 * fichat / 2), windowheight - int(3 * fichat/ 2), fichat, fichat)
    fichamoradaimg=pygame.image.load('ficha_morada.png')
    fichamoradaimg=pygame.transform.smoothscale(fichamoradaimg, (fichat, fichat))
    fichaverdeimg=pygame.image.load('ficha_verde.png')
    fichaverdeimg=pygame.transform.smoothscale(fichaverdeimg, (fichat, fichat))
    tableroimg=pygame.image.load('tablero.png')
    tableroimg=pygame.transform.smoothscale(tableroimg, (fichat, fichat))
    ganasteimg=pygame.image.load('ganaste.png')
    perdisteimg=pygame.image.load('perdiste.png')
    empateimg=pygame.image.load('empate.png')
    ganasterect=ganasteimg.get_rect()
    ganasterect.center=(int(windowwidth/2),int(windowheight/2))
    instruccionesimg=pygame.image.load('instrucciones.png')
    instruccionesrect=instruccionesimg.get_rect()
    instruccionesrect.left=morados.right+10
    instruccionesrect.centery=morados.centery

    juego= True
    while True:
        run(juego)
        juego=False

def run():
    if juego:
        turno=computadora
        mostrarinstrucciones=True
    else:
        if random.randint(0, 1)==0
            turno=computadora
        else:
            turno=usuario
        mostrarinstrucciones=False
    tablero=nuevotablero()

    while True:
        if turno == usuario:
            turnousuario(tablero, mostrarinstrucciones)
            if mostrarinstrucciones:
                mostrarinstrucciones = False
            if ganador(tablero, morado):
                imagen = ganasteimg
                break
            turno = computadora
        else:
            columna = turnocomputadora(tablero)
            animarcomputadora(tablero, columna)
            efectuarjugada(tablero, verde, columna)
            if ganador(tablero, verde):
                imagen = perdisteimg
                break
            turno = usuario

        if tablerolleno(tablero):
            imagen = empateimg
            break

    while True:
        formartablero(tablero)
        window.blit(ganasteimg, ganasterect)
        pygame.display.update()
        clock.tick()
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            elif event.type == MOUSEBUTTONUP:
                return

def efectuarjugada(tabla, jugador, columna):

def formartablero(tabla, fichaextra=None):

def nuevotablero():

def turnousuario(tabla, primermovimiento):

def animarficha(tabla, columna, color):

def animarcomputadora(tabla):

def turnocomputadora(tabla):

def posiblesmovimientos(tabla, espacio, prever):

def menorespaciolibre(tabla, columna):

def movimientovalido(tabla, columna):

def tablerolleno(tabla):
    
def ganador(tabla, espacio):

if __name__ == '__main__':
    main()
